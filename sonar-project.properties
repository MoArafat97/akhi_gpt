# SonarQube Configuration for NafsAI Flutter Project
# This file configures SonarQube analysis for comprehensive code quality monitoring

# Project identification
sonar.projectKey=nafs-ai
sonar.projectName=NafsAI - Muslim Companion App
sonar.projectVersion=1.0.2
sonar.organization=nafs-ai-org

# Source code configuration
sonar.sources=lib
sonar.tests=test,integration_test
sonar.language=dart

# File encoding
sonar.sourceEncoding=UTF-8

# Exclusions
sonar.exclusions=**/*.g.dart,**/*.freezed.dart,**/*.mocks.dart,**/l10n/**,build/**,.dart_tool/**,**/*.pb.dart,**/*.pbjson.dart,**/*.pbgrpc.dart

# Test exclusions
sonar.test.exclusions=**/*_test.dart,**/test/**,**/integration_test/**

# Coverage configuration
sonar.dart.coverage.reportPaths=coverage/lcov.info
sonar.coverage.exclusions=**/*.g.dart,**/*.freezed.dart,**/*.mocks.dart,**/l10n/**,lib/main.dart

# Duplication configuration
sonar.cpd.exclusions=**/*.g.dart,**/*.freezed.dart,**/*.mocks.dart

# Quality gate configuration
sonar.qualitygate.wait=true

# Analysis parameters
sonar.analysis.mode=publish

# Security configuration for NafsAI specific requirements
# Custom rules for API key detection
sonar.dart.security.apikey.pattern=sk-or-v1-[a-zA-Z0-9]{32,}
sonar.dart.security.hardcoded.secrets=true

# Performance monitoring
sonar.dart.performance.monitoring=true

# Flutter-specific configurations
sonar.dart.flutter.project=true
sonar.dart.flutter.version=3.24.0

# Code complexity thresholds
sonar.dart.complexity.function=10
sonar.dart.complexity.file=200
sonar.dart.complexity.class=50

# Maintainability thresholds
sonar.dart.maintainability.rating.threshold=A
sonar.technical_debt.rating.threshold=A

# Reliability thresholds
sonar.dart.reliability.rating.threshold=A
sonar.dart.bugs.threshold=0

# Security thresholds
sonar.dart.security.rating.threshold=A
sonar.dart.vulnerabilities.threshold=0
sonar.dart.security_hotspots.threshold=0

# Coverage thresholds
sonar.coverage.line.threshold=80.0
sonar.coverage.function.threshold=85.0
sonar.coverage.branch.threshold=75.0

# New code quality requirements (for pull requests)
sonar.new_code.coverage.line.threshold=85.0
sonar.new_code.coverage.function.threshold=90.0
sonar.new_code.coverage.branch.threshold=80.0
sonar.new_code.duplication.threshold=3.0
sonar.new_code.maintainability.rating=A
sonar.new_code.reliability.rating=A
sonar.new_code.security.rating=A

# Service-specific analysis
# Critical services (higher standards)
sonar.dart.critical.paths=lib/services/openrouter_service.dart,lib/services/subscription_service.dart,lib/services/encryption_service.dart,lib/services/secure_config_service.dart,lib/services/user_api_key_service.dart,lib/services/diagnostic_service.dart
sonar.dart.critical.coverage.threshold=95.0
sonar.dart.critical.complexity.threshold=8

# Security-sensitive files
sonar.dart.security.paths=lib/services/encryption_service.dart,lib/services/secure_config_service.dart,lib/services/user_api_key_service.dart
sonar.dart.security.coverage.threshold=98.0

# UI components (relaxed standards)
sonar.dart.ui.paths=lib/pages/**,lib/widgets/**
sonar.dart.ui.coverage.threshold=75.0
sonar.dart.ui.complexity.threshold=12

# Utility classes
sonar.dart.utility.paths=lib/utils/**,lib/models/**
sonar.dart.utility.coverage.threshold=85.0

# Branch analysis configuration
sonar.branch.name=${BRANCH_NAME}
sonar.branch.target=main

# Pull request analysis
sonar.pullrequest.key=${PR_NUMBER}
sonar.pullrequest.branch=${PR_BRANCH}
sonar.pullrequest.base=${PR_BASE}

# Links and documentation
sonar.links.homepage=https://github.com/MoArafat97/akhi_gpt
sonar.links.ci=https://github.com/MoArafat97/akhi_gpt/actions
sonar.links.scm=https://github.com/MoArafat97/akhi_gpt
sonar.links.issue=https://github.com/MoArafat97/akhi_gpt/issues

# Additional metadata
sonar.projectDescription=NafsAI is a supportive Muslim companion app providing emotional support, spiritual guidance, and mental health resources through AI-powered conversations.
sonar.projectBaseDir=.

# Logging configuration
sonar.log.level=INFO
sonar.verbose=false

# Scanner configuration
sonar.scanner.force-deprecated-java-version=false
